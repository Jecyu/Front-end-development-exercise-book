function Carousel(n){this.$carousel=n,this.$bannerList=n.find(".banner-list"),this.$items=this.$bannerList.children(),this.bannerW=$(".banner").width(),this.len=this.$items.size(),this.index=0,this.picTimer={}}$(".btn-groups .item-2").addClass("active"),Carousel.prototype={init:function(){this.onLoad(),this.bindEvent()},onLoad:function(){for(var n=this,i="<div class='btn-group'>",e=0;e<n.len;e++)i+="<span></span>";i+="</div>",i+="<div class='banner-arrow prev'></div><div class='banner-arrow next'></div>",i+="<span class='hidden left'></span><span class='hidden right'></span>",n.$carousel.append(i),n.$bannerList.css("width",n.bannerW*(n.len+1))},bindEvent:function(){var n=this;n.$carousel.hover(function(){clearInterval(n.picTimer)},function(){n.picTimer=setInterval(function(){n.index===n.len?(n.index=0,n.showFirstPic(n.len,n.index)):n.showPics(n.index),n.index++},2e3)}),n.$carousel.find("div.btn-group span").css("opacity",.4).mouseenter(function(){n.index=n.$carousel.find(".btn-group span").index(this),n.showPics(n.index)}),n.$carousel.find("span.left").click(function(){-1===n.index&&(n.index=n.len-1),n.showPics(n.index),n.index--}),n.$carousel.find("span.right").click(function(){n.index===n.len?(n.index=0,n.showFirstPic(n.len,n.index)):n.showPics(n.index),n.index++})},showPics:function(n){var i=this,e=-n*i.bannerW;i.$bannerList.stop(!0,!1).animate({left:e},500),i.$carousel.find(".btn-group span").animate({opacity:"0.4"},300).eq(n).animate({opacity:"1"},100)},showFirstPic:function(n,i){var e=this;e.$bannerList.append(e.$items.eq(0).clone());var s=-n*e.bannerW;e.$bannerList.stop(!0,!1).animate({left:s},500,function(){e.$bannerList.css("left","0"),e.$carousel.find("ul li:last").remove()}),e.$carousel.find(".btn-group span").animate({opacity:"0.4"},300).eq(i).animate({opacity:"1"},100)}};var c1=new Carousel($(".carousel-1")),c2=new Carousel($(".carousel-2")),c3=new Carousel($(".carousel-3")),c4=new Carousel($(".carousel-4"));$(function(){c1.init(),c2.init(),c3.init(),c4.init()});